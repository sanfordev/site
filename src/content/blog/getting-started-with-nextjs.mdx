# Getting Started with Next.js

Next.js has become one of the most popular React frameworks, offering an excellent developer experience with all the features you need for production. This guide will walk you through setting up a Next.js project from scratch and implementing best practices for file organization, routing, and performance.

## Prerequisites

Before we begin, ensure you have the following installed:

- Node.js 16.8 or later
- npm, yarn, or pnpm for package management
- A code editor (VS Code recommended)

## Creating a New Next.js Project

The easiest way to get started with Next.js is to use the `create-next-app` command:

```bash
npx create-next-app@latest my-next-app
# or
yarn create next-app my-next-app
# or
pnpm create next-app my-next-app
```

This will prompt you with configuration options. For a modern project, I recommend selecting:

- TypeScript for type safety
- ESLint for code quality
- Tailwind CSS for styling
- App Router for the latest routing features

<Callout>
  The App Router is Next.js 13+'s newer routing system that replaces the Pages
  Router. It offers more features like server components, nested layouts, and
  simplified data fetching.
</Callout>

## Understanding the Project Structure

After creating your project, you'll have a directory structure that looks something like this:

```
my-next-app/
├── app/
│   ├── layout.tsx
│   ├── page.tsx
│   └── globals.css
├── public/
├── components/
├── .eslintrc.json
├── next.config.js
├── package.json
├── postcss.config.js
├── tailwind.config.js
└── tsconfig.json
```

Let's go through the key directories and files:

- `app/`: Contains your application's routes, layouts, and pages
- `public/`: Stores static assets like images and fonts
- `components/`: Where you'll create reusable UI components
- `next.config.js`: Next.js configuration file
- `tailwind.config.js`: Tailwind CSS configuration

## Building Your First Pages

Next.js uses file-system based routing. In the App Router, each folder represents a route segment, and `page.tsx` files define the UI for that route.

Here's a simple example of creating a basic page:

```tsx
// app/page.tsx
export default function Home() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-center p-24">
      <h1 className="text-4xl font-bold mb-6">Welcome to My Next.js App</h1>
      <p className="text-xl">Get started by editing this page</p>
    </main>
  )
}
```

<Callout type="info" title="Server Components">
  By default, components in the App Router are React Server Components. This
  means they run on the server and don't include React's client-side runtime,
  resulting in smaller bundle sizes and better performance.
</Callout>

## Adding Layouts

Layouts help you create consistent UI elements across multiple pages. In Next.js, you can create a `layout.tsx` file in any folder to define a shared layout for all pages in that folder and its subfolders.

```tsx
// app/layout.tsx
import './globals.css'
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'My Next.js App',
  description: 'Created with Next.js',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>
        <header className="py-4 px-6 bg-slate-100">
          <nav>{/* Navigation content */}</nav>
        </header>
        {children}
        <footer className="py-4 px-6 bg-slate-100">
          {/* Footer content */}
        </footer>
      </body>
    </html>
  )
}
```

## Data Fetching

Next.js provides several methods for fetching data, but for server components, you can use `fetch` directly with async/await:

```tsx
// app/posts/page.tsx
async function getPosts() {
  const res = await fetch('https://api.example.com/posts')
  if (!res.ok) {
    throw new Error('Failed to fetch posts')
  }
  return res.json()
}

export default async function Posts() {
  const posts = await getPosts()

  return (
    <div>
      <h1>Posts</h1>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>{post.title}</li>
        ))}
      </ul>
    </div>
  )
}
```

<Callout type="warning" title="Important">
  When fetching data in server components, make sure to properly handle errors
  and loading states. You can use Next.js's error.tsx and loading.tsx files for
  more advanced patterns.
</Callout>

## Client Components

When you need interactivity like state or event handlers, you'll need to use client components. Add the `'use client'` directive at the top of your component file:

```tsx
'use client'

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  )
}
```

## Performance Optimizations

Next.js includes several built-in optimizations, but here are a few important ones to be aware of:

### Image Optimization

Use the Next.js `Image` component to automatically optimize images:

```tsx
import Image from 'next/image'

export default function ProfileImage() {
  return (
    <Image
      src="/profile.webp"
      alt="Profile picture"
      width={500}
      height={500}
      priority
    />
  )
}
```

### Route Prefetching

Links are automatically prefetched when they appear in the viewport:

```tsx
import Link from 'next/link'

export default function Navigation() {
  return (
    <nav>
      <Link href="/">Home</Link>
      <Link href="/about">About</Link>
      <Link href="/blog">Blog</Link>
    </nav>
  )
}
```

## Conclusion

This guide has covered the basics of getting started with Next.js, from project setup to creating pages, layouts, and optimizing performance. Next.js continues to evolve with new features and improvements, so be sure to check the official documentation for the latest updates.

Happy coding!
